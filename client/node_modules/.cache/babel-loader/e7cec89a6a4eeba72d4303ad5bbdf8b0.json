{"ast":null,"code":"import _defineProperty from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./UpdateFormPets.css';import VetHospitalProfielService from'../../../../service/profile.service';import PetService from'../../../../service/pet.service';import FileService from'../../../../service/file.service';import Container from'react-bootstrap/Container';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';var UpdateFormPets=/*#__PURE__*/function(_Component){_inherits(UpdateFormPets,_Component);var _super=_createSuper(UpdateFormPets);function UpdateFormPets(props){var _this;_classCallCheck(this,UpdateFormPets);_this=_super.call(this,props);_this.handleInputChange=function(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;_this.setState({petUpdated:_objectSpread(_objectSpread({},_this.state.petUpdated),{},_defineProperty({},name,value))});};_this.handleSubmit=function(e){e.preventDefault();_this.petService.editPet(_this.props.propsPetCardClient._id,_this.state.petUpdated).then(function(){return _this.props.finishUpdatePet();}).catch(function(err){return console.log(err);});};_this.handleFileUpload=function(e){var uploadData=new FormData();uploadData.append(\"petPicPath\",e.target.files[0]);_this.filesService.handleUpload(uploadData).then(function(response){_this.setState({petUpdated:_objectSpread(_objectSpread({},_this.state.petUpdated),{},{petPicPath:response.data.secure_url})});}).catch(function(err){return console.log(err);});};_this.getVetHospitals=function(){_this.hospitalsService.getOnlyVetHospital().then(function(response){return _this.setState({vetHospitals:response.data});}).catch(function(err){return console.log(err);});};_this.displayHospitals=function(){_this.state.vetHospitals&&_this.state.vetHospitals.map(function(hospital){return/*#__PURE__*/React.createElement(\"option\",{value:hospital._id},hospital.username);});};_this.componentDidMount=function(){_this.getVetHospitals();};_this.state={petUpdated:{name:_this.props.statePetCardClient.petInfo.name,species:_this.props.statePetCardClient.petInfo.species,petPicPath:_this.props.statePetCardClient.petInfo.petPicPath,breed:_this.props.statePetCardClient.petInfo.breed,owner:_this.props.statePetCardClient.petInfo.owner._id,vetHospital:_this.props.statePetCardClient.petInfo.vetHospital[0]._id?_this.props.statePetCardClient.petInfo.vetHospital[0]._id:_this.props.statePetCardClient.petInfo.vetHospital[0]._id=\"5ec698517f1ec422d7ec01d8\"},vetHospitals:null};_this.petService=new PetService();_this.filesService=new FileService();_this.hospitalsService=new VetHospitalProfielService();return _this;}_createClass(UpdateFormPets,[{key:\"render\",value:function render(){var _this2=this;if(!this.state.vetHospitals){return/*#__PURE__*/React.createElement(\"h1\",null,\"Cargando...\");}else{return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Actualizar Mascota\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(Form,{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"nombre\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Nombre\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"name\",type:\"text\",value:this.state.petUpdated.name,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"especie\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Especie\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"species\",type:\"text\",value:this.state.petUpdated.species,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"raza\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Raza\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"breed\",type:\"text\",value:this.state.petUpdated.breed,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"select-hospital\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Selecciona hospital\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",name:\"vetHospital\",value:this.state.petUpdated.vetHospital,onChange:this.handleInputChange},/*#__PURE__*/React.createElement(\"option\",{value:this.state.petUpdated.vetHospital._id},this.state.petUpdated.vetHospital.username),this.state.vetHospitals&&this.state.vetHospitals.map(function(hospital){return/*#__PURE__*/React.createElement(\"option\",{key:hospital._id,value:hospital._id},hospital.username);}))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"img\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Foto de tu mascota\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"petPicPath\",type:\"file\",onChange:this.handleFileUpload})),/*#__PURE__*/React.createElement(Button,{variant:\"dark\",type:\"submit\"},\"Actualizar mascota\"),/*#__PURE__*/React.createElement(Button,{variant:\"dark\",onClick:function onClick(){return _this2.props.closeModal();}},\"Cerrar\")));}}}]);return UpdateFormPets;}(Component);export default UpdateFormPets;","map":{"version":3,"sources":["/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/src/components/pages/pets/updatePets/UpdateFormPets.js"],"names":["React","Component","VetHospitalProfielService","PetService","FileService","Container","Form","Button","UpdateFormPets","props","handleInputChange","e","target","name","value","setState","petUpdated","state","handleSubmit","preventDefault","petService","editPet","propsPetCardClient","_id","then","finishUpdatePet","catch","err","console","log","handleFileUpload","uploadData","FormData","append","files","filesService","handleUpload","response","petPicPath","data","secure_url","getVetHospitals","hospitalsService","getOnlyVetHospital","vetHospitals","displayHospitals","map","hospital","username","componentDidMount","statePetCardClient","petInfo","species","breed","owner","vetHospital","closeModal"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './UpdateFormPets.css'\n\nimport VetHospitalProfielService from '../../../../service/profile.service'\nimport PetService from '../../../../service/pet.service'\nimport FileService from '../../../../service/file.service'\n\n\nimport Container from 'react-bootstrap/Container'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\n\nclass UpdateFormPets extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            petUpdated: {\n                name: this.props.statePetCardClient.petInfo.name,\n                species: this.props.statePetCardClient.petInfo.species,\n                petPicPath: this.props.statePetCardClient.petInfo.petPicPath,\n                breed: this.props.statePetCardClient.petInfo.breed,\n                owner: this.props.statePetCardClient.petInfo.owner._id,\n                vetHospital: this.props.statePetCardClient.petInfo.vetHospital[0]._id ? this.props.statePetCardClient.petInfo.vetHospital[0]._id : this.props.statePetCardClient.petInfo.vetHospital[0]._id = \"5ec698517f1ec422d7ec01d8\"\n            },\n            vetHospitals: null,\n\n        }\n        this.petService = new PetService()\n        this.filesService = new FileService()\n        this.hospitalsService = new VetHospitalProfielService()\n    }\n\n    handleInputChange = e => {\n        const { name, value } = e.target\n\n        this.setState({\n            petUpdated: { ...this.state.petUpdated, [name]: value }\n        })\n    }\n\n    handleSubmit = e => {\n        e.preventDefault()\n        this.petService.editPet(this.props.propsPetCardClient._id, this.state.petUpdated)\n            .then(() => this.props.finishUpdatePet())\n            .catch(err => console.log(err))\n    }\n\n    handleFileUpload = e => {\n\n        const uploadData = new FormData()\n        uploadData.append(\"petPicPath\", e.target.files[0])\n        this.filesService.handleUpload(uploadData)\n            .then(response => {\n                this.setState({\n                    petUpdated: { ...this.state.petUpdated, petPicPath: response.data.secure_url }\n                })\n            })\n            .catch(err => console.log(err))\n    }\n\n    getVetHospitals = () => {\n        this.hospitalsService.getOnlyVetHospital()\n            .then(response => this.setState({ vetHospitals: response.data }))\n            .catch(err => console.log(err))\n    }\n\n\n    displayHospitals = () => {\n        this.state.vetHospitals && this.state.vetHospitals.map(hospital => {\n            return (<option value={hospital._id}>{hospital.username}</option>)\n        })\n    }\n\n\n    componentDidMount = () => {\n        this.getVetHospitals()\n    }\n\n\n\n    render() {\n\n\n\n        if (!this.state.vetHospitals) {\n            return <h1>Cargando...</h1>\n        } else {\n            return (\n                <Container>\n\n                    <h1>Actualizar Mascota</h1>\n                    <hr></hr>\n                    <Form onSubmit={this.handleSubmit}>\n                        <Form.Group controlId=\"nombre\">\n                            <Form.Label>Nombre</Form.Label>\n                            <Form.Control name=\"name\" type=\"text\" value={this.state.petUpdated.name} onChange={this.handleInputChange} />\n                        </Form.Group>\n                        <Form.Group controlId=\"especie\">\n                            <Form.Label>Especie</Form.Label>\n                            <Form.Control name=\"species\" type=\"text\" value={this.state.petUpdated.species} onChange={this.handleInputChange} />\n                        </Form.Group>\n                        <Form.Group controlId=\"raza\">\n                            <Form.Label>Raza</Form.Label>\n                            <Form.Control name=\"breed\" type=\"text\" value={this.state.petUpdated.breed} onChange={this.handleInputChange} />\n                        </Form.Group>\n\n                        <Form.Group controlId=\"select-hospital\">\n                            <Form.Label>Selecciona hospital</Form.Label>\n                            <Form.Control as=\"select\" name=\"vetHospital\" value={this.state.petUpdated.vetHospital} onChange={this.handleInputChange} >\n                                <option value={this.state.petUpdated.vetHospital._id}>{this.state.petUpdated.vetHospital.username}</option>\n                                {this.state.vetHospitals && this.state.vetHospitals.map(hospital => {\n                                    return (<option key={hospital._id} value={hospital._id}>{hospital.username}</option>)\n                                })}\n                            </Form.Control>\n                        </Form.Group>\n\n                        <Form.Group controlId=\"img\">\n                            <Form.Label>Foto de tu mascota</Form.Label>\n                            <Form.Control name=\"petPicPath\" type=\"file\" onChange={this.handleFileUpload} />\n                        </Form.Group>\n                        <Button variant=\"dark\" type=\"submit\">Actualizar mascota</Button>\n                        <Button variant=\"dark\" onClick={() => this.props.closeModal()}>Cerrar</Button>\n\n                    </Form>\n\n                </Container>\n            )\n        }\n    }\n}\n\nexport default UpdateFormPets\n"]},"metadata":{},"sourceType":"module"}