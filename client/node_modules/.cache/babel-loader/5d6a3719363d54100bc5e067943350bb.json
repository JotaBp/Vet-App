{"ast":null,"code":"import _defineProperty from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import VetHospitalProfielService from'../../../../service/profile.service';import PetService from'../../../../service/pet.service';import FileService from'../../../../service/file.service';import Container from'react-bootstrap/Container';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';var PetForm=/*#__PURE__*/function(_Component){_inherits(PetForm,_Component);var _super=_createSuper(PetForm);function PetForm(props){var _this;_classCallCheck(this,PetForm);_this=_super.call(this,props);_this.getVetHospitals=function(){_this.hospitalsService.getOnlyVetHospital().then(function(response){return _this.setState({vetHospitals:response.data});}).catch(function(err){return console.log(err);});};_this.componentDidMount=function(){_this.getVetHospitals();};_this.displayHospitals=function(){_this.state.vetHospitals&&_this.state.vetHospitals.map(function(hospital){return/*#__PURE__*/React.createElement(\"option\",{value:hospital._id},hospital.username);});};_this.handleInputChange=function(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;_this.setState({petCreated:_objectSpread(_objectSpread({},_this.state.petCreated),{},_defineProperty({},name,value))});};_this.handleSubmit=function(e){e.preventDefault();_this.petService.petCreate(_this.state.petCreated).then(function(){return _this.props.finishPetPost();}).catch(function(err){return console.log(err);});};_this.handleFileUpload=function(e){var uploadData=new FormData();uploadData.append(\"petPicPath\",e.target.files[0]);_this.filesService.handleUpload(uploadData).then(function(response){_this.setState({petCreated:_objectSpread(_objectSpread({},_this.state.petCreated),{},{petPicPath:response.data.secure_url})});}).catch(function(err){return console.log(err);});};_this.getVetHospitals=function(){_this.hospitalsService.getOnlyVetHospital().then(function(response){return _this.setState({vetHospitals:response.data});}).catch(function(err){return console.log(err);});};_this.componentDidMount=function(){!_this.state.vetHospitals&&_this.getVetHospitals();};_this.displayHospitals=function(){return _this.state.vetHospitals&&_this.state.vetHospitals.map(function(hospital){return/*#__PURE__*/React.createElement(\"option\",{value:hospital._id},hospital.username);});};_this.state={petCreated:{name:'',species:'',petPicPath:'',breed:'',owner:_this.props.ownerID,vetHospital:''},vetHospitals:null};_this.petService=new PetService();_this.filesService=new FileService();_this.hospitalsService=new VetHospitalProfielService();return _this;}_createClass(PetForm,[{key:\"render\",value:function render(){var _this2=this;if(!this.state.vetHospitals){return/*#__PURE__*/React.createElement(\"h1\",null,\"Cargando...\");}else{return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Nueva Mascota\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(Form,{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"nombre\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Nombre\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"name\",type:\"text\",value:this.state.petCreated.name,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"especie\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Especie\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"species\",type:\"text\",value:this.state.petCreated.species,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"raza\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Raza\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"breed\",type:\"text\",value:this.state.petCreated.breed,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"select-hospital\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Selecciona hospital\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",name:\"vetHospital\",value:this.state.petCreated.vetHospital,onChange:this.handleInputChange},/*#__PURE__*/React.createElement(\"option\",null,\"Seleccionar\"),this.displayHospitals())),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"img\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Foto de tu mascota\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"petPicPath\",type:\"file\",onChange:this.handleFileUpload})),/*#__PURE__*/React.createElement(Button,{variant:\"dark\",onClick:function onClick(){return _this2.props.closeModal();}},\"Cerrar\"),/*#__PURE__*/React.createElement(Button,{variant:\"dark\",type:\"submit\"},\"Nueva mascota\")));}}}]);return PetForm;}(Component);export default PetForm;","map":{"version":3,"sources":["/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/src/components/pages/pets/petsForm/PetForm.js"],"names":["React","Component","VetHospitalProfielService","PetService","FileService","Container","Form","Button","PetForm","props","getVetHospitals","hospitalsService","getOnlyVetHospital","then","response","setState","vetHospitals","data","catch","err","console","log","componentDidMount","displayHospitals","state","map","hospital","_id","username","handleInputChange","e","target","name","value","petCreated","handleSubmit","preventDefault","petService","petCreate","finishPetPost","handleFileUpload","uploadData","FormData","append","files","filesService","handleUpload","petPicPath","secure_url","species","breed","owner","ownerID","vetHospital","closeModal"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport VetHospitalProfielService from '../../../../service/profile.service'\nimport PetService from '../../../../service/pet.service'\nimport FileService from '../../../../service/file.service'\n\n\nimport Container from 'react-bootstrap/Container'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\n\n\nclass PetForm extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            petCreated: {\n                name: '',\n                species: '',\n                petPicPath: '',\n                breed: '',\n                owner: this.props.ownerID,\n                vetHospital: ''\n            },\n            vetHospitals: null,\n\n        }\n        this.petService = new PetService()\n        this.filesService = new FileService()\n        this.hospitalsService = new VetHospitalProfielService()\n    }\n\n    getVetHospitals = () => {\n        this.hospitalsService.getOnlyVetHospital()\n            .then(response => {\n                return this.setState({ vetHospitals: response.data })})\n            .catch(err => console.log(err))\n    }\n\n\n    componentDidMount = () => {\n        this.getVetHospitals()\n    }\n\n    displayHospitals = () => {\n         this.state.vetHospitals && this.state.vetHospitals.map( hospital => {             \n            return (<option value={hospital._id}>{hospital.username}</option>)})\n    }\n\n    handleInputChange = e => {\n        const { name, value } = e.target\n\n        this.setState({\n           petCreated: { ...this.state.petCreated, [name]: value }\n        })\n    }\n\n    handleSubmit = e => {\n        e.preventDefault()\n        this.petService.petCreate(this.state.petCreated)\n            .then(() => this.props.finishPetPost())\n            .catch(err => console.log(err))\n    }\n\n    handleFileUpload = e => {\n\n        const uploadData = new FormData()\n        uploadData.append(\"petPicPath\", e.target.files[0])\n        this.filesService.handleUpload(uploadData)\n            .then(response => {\n                this.setState({\n                  petCreated:  {...this.state.petCreated, petPicPath: response.data.secure_url}\n                })\n            })\n            .catch(err => console.log(err))\n    }\n\n    getVetHospitals = () => {\n        this.hospitalsService.getOnlyVetHospital()\n            .then(response => {\n                return this.setState({ vetHospitals: response.data })})\n            .catch(err => console.log(err))\n    }\n\n\n    componentDidMount = () => {\n        !this.state.vetHospitals && this.getVetHospitals() \n    }\n\n    displayHospitals = () => {\n         return this.state.vetHospitals && this.state.vetHospitals.map( hospital => {\n                     \n            return (<option value={hospital._id}>{hospital.username}</option>)})\n    }\n\n    render() {\n        if(!this.state.vetHospitals){\n            return <h1>Cargando...</h1>\n        }else{\n        return (\n            <Container>\n\n                <h1>Nueva Mascota</h1>\n                <hr></hr>\n                <Form onSubmit={this.handleSubmit}>\n                    <Form.Group controlId=\"nombre\">\n                        <Form.Label>Nombre</Form.Label>\n                        <Form.Control name=\"name\" type=\"text\" value={this.state.petCreated.name} onChange={this.handleInputChange} />\n                    </Form.Group>\n                    <Form.Group controlId=\"especie\">\n                        <Form.Label>Especie</Form.Label>\n                        <Form.Control name=\"species\" type=\"text\" value={this.state.petCreated.species} onChange={this.handleInputChange} />\n                    </Form.Group>\n                    <Form.Group controlId=\"raza\">\n                        <Form.Label>Raza</Form.Label>\n                        <Form.Control name=\"breed\" type=\"text\" value={this.state.petCreated.breed} onChange={this.handleInputChange} />\n                    </Form.Group>\n\n                    <Form.Group controlId=\"select-hospital\">\n                        <Form.Label>Selecciona hospital</Form.Label>\n                        <Form.Control as=\"select\" name=\"vetHospital\" value={this.state.petCreated.vetHospital} onChange={this.handleInputChange} >\n                            <option>Seleccionar</option>\n                            {this.displayHospitals()}\n                        </Form.Control>\n                    </Form.Group>\n\n                    <Form.Group controlId=\"img\">\n                        <Form.Label>Foto de tu mascota</Form.Label>\n                        <Form.Control name=\"petPicPath\" type=\"file\" onChange={this.handleFileUpload} />\n                    </Form.Group>\n\n                    <Button variant=\"dark\" onClick={() => this.props.closeModal()}>Cerrar</Button>\n                    <Button variant=\"dark\" type=\"submit\">Nueva mascota</Button>\n                </Form>\n            </Container>\n        )\n    }\n\n}\n}\n\nexport default PetForm"]},"metadata":{},"sourceType":"module"}