{"ast":null,"code":"import _objectSpread from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import CiteService from'../../../../service/cite.service';import QueryService from'../../../../service/query.service';import'./DashboardHospital.css';import CiteCard from'../../cites/citesCard/CiteCard';import QueryCard from'../../query/queryCard/QueryCard';import CiteForm from'../../cites/citesForm/CiteForm';import Container from'react-bootstrap/Container';import Button from'react-bootstrap/Button';import Toast from'react-bootstrap/Toast';import Modal from'react-bootstrap/Modal';var DashboardHospital=/*#__PURE__*/function(_Component){_inherits(DashboardHospital,_Component);var _super=_createSuper(DashboardHospital);function DashboardHospital(props){var _this;_classCallCheck(this,DashboardHospital);_this=_super.call(this,props);_this.handleModal=function(visible){return _this.setState({modalShow:visible});};_this.handletoast=function(visible){var text=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var toastCopy=_objectSpread({},_this.state.toast);toastCopy.show=visible;toastCopy.text=text;_this.setState({toast:toastCopy});};_this.getCitesInfo=function(){_this.citeService.citeFromHospital(_this.state.userInfo.id).then(function(response){return _this.setState({cites:response.data});}).catch(function(err){return console.log(err);});};_this.getQueryInfo=function(){_this.queryService.queryFromHospital(_this.state.userInfo.id).then(function(response){return _this.setState({querys:response.data});}).catch(function(err){return console.log(err);});};_this.componentDidMount=function(){_this.getCitesInfo();_this.getQueryInfo();};_this.finishCiteCreate=function(){_this.getCitesInfo();_this.handleModal(false);_this.handletoast(true,'Cita creada en BBDD');};_this.state={userInfo:{id:_this.props.loggedInUser._id},querys:\"\",cites:\"\",toast:{show:false,text:''},modalShow:false};_this.citeService=new CiteService();_this.queryService=new QueryService();return _this;}_createClass(DashboardHospital,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(Container,{className:\"content-dashboard\"},/*#__PURE__*/React.createElement(Container,{as:\"section\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this2.handleModal(true);},variant:\"dark\"},\"Crear nueva cita\")),/*#__PURE__*/React.createElement(Container,{as:\"section\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Citas\"),this.state.cites&&this.state.cites.map(function(cite){return/*#__PURE__*/React.createElement(CiteCard,Object.assign({key:cite._id},cite));})),/*#__PURE__*/React.createElement(Container,{as:\"section\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Consultas\"),this.state.querys&&this.state.querys.map(function(query){return/*#__PURE__*/React.createElement(QueryCard,Object.assign({key:query._id},query));})),/*#__PURE__*/React.createElement(Modal,{className:\"modal-window\",show:this.state.modalShow,onHide:function onHide(){return _this2.handleModal(false);}},/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(CiteForm,{finishCitePost:this.finishCiteCreate,hospitalID:this.props.loggedInUser._id,pets:this.props.loggedInUser.pets,closeModal:function closeModal(){return _this2.handleModal(false);}}))),/*#__PURE__*/React.createElement(Toast,{className:\"tostada\",onClose:function onClose(){return _this2.handletoast(false);},show:this.state.toast.show,delay:3000},/*#__PURE__*/React.createElement(Toast.Header,null,/*#__PURE__*/React.createElement(\"strong\",{className:\"mr-auto\"},\"Mensaje\")),/*#__PURE__*/React.createElement(Toast.Body,null,this.state.toast.text)));}}]);return DashboardHospital;}(Component);export default DashboardHospital;","map":{"version":3,"sources":["/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/src/components/pages/dashboard/dashboardHospital/DashboardHospital.js"],"names":["React","Component","CiteService","QueryService","CiteCard","QueryCard","CiteForm","Container","Button","Toast","Modal","DashboardHospital","props","handleModal","visible","setState","modalShow","handletoast","text","toastCopy","state","toast","show","getCitesInfo","citeService","citeFromHospital","userInfo","id","then","response","cites","data","catch","err","console","log","getQueryInfo","queryService","queryFromHospital","querys","componentDidMount","finishCiteCreate","loggedInUser","_id","map","cite","query","pets"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport CiteService from '../../../../service/cite.service'\nimport QueryService from '../../../../service/query.service'\n\nimport './DashboardHospital.css'\n\nimport CiteCard from '../../cites/citesCard/CiteCard'\nimport QueryCard from '../../query/queryCard/QueryCard'\nimport CiteForm from '../../cites/citesForm/CiteForm'\n\nimport Container from 'react-bootstrap/Container'\nimport Button from 'react-bootstrap/Button'\nimport Toast from 'react-bootstrap/Toast'\nimport Modal from 'react-bootstrap/Modal'\n\n\n\nclass DashboardHospital extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = { \n            userInfo: {\n                id: this.props.loggedInUser._id\n            },\n                querys: \"\",\n                cites: \"\",\n            \n            toast: {\n                show: false,\n                text: ''\n            },\n            modalShow: false\n\n        }\n        this.citeService = new CiteService()\n        this.queryService = new QueryService()\n    }\n    \n    handleModal = visible => this.setState({ modalShow: visible })\n    handletoast = (visible, text = '') => {\n        const toastCopy = { ...this.state.toast }\n        toastCopy.show = visible\n        toastCopy.text = text\n        this.setState({ toast: toastCopy })\n    }\n    \n    getCitesInfo = () => {\n        this.citeService.citeFromHospital(this.state.userInfo.id)\n        .then(response => this.setState({ cites: response.data }))\n        .catch(err => console.log(err))\n    }\n\n    getQueryInfo = () => {\n        this.queryService.queryFromHospital(this.state.userInfo.id)\n        .then(response => this.setState({ querys: response.data }))\n        .catch(err => console.log(err))\n    }\n    \n    \n    componentDidMount = () => {\n        this.getCitesInfo()\n        this.getQueryInfo()\n    }\n\n    finishCiteCreate = () => {\n        this.getCitesInfo()\n        this.handleModal(false)\n        this.handletoast(true, 'Cita creada en BBDD')\n    }\n\n    \n\n    render() {\n\n\n\n        return (\n            <Container className=\"content-dashboard\">\n                <Container as=\"section\" >\n\n                         <Button onClick={() => this.handleModal(true)} variant=\"dark\" >Crear nueva cita</Button>\n\n\n                </Container>\n\n                <Container as=\"section\" >\n\n                <h1>Citas</h1>\n\n\n                    {this.state.cites && this.state.cites.map(cite =>  <CiteCard key={cite._id} {...cite} />)}\n\n\n                </Container>\n\n                <Container as=\"section\" >\n\n                <h1>Consultas</h1>\n\n\n                    {this.state.querys && this.state.querys.map(query => <QueryCard key={query._id} {...query} />)}\n\n\n                </Container>\n\n                <Modal className=\"modal-window\" show={this.state.modalShow} onHide={() => this.handleModal(false)}>\n                    <Modal.Body >\n                        <CiteForm  finishCitePost={this.finishCiteCreate} hospitalID={this.props.loggedInUser._id} pets={this.props.loggedInUser.pets} closeModal={() => this.handleModal(false)} />\n                    </Modal.Body>\n                </Modal>\n\n                <Toast className=\"tostada\" onClose={() => this.handletoast(false)} show={this.state.toast.show} delay={3000} >\n                    <Toast.Header>\n                        <strong className=\"mr-auto\">Mensaje</strong>\n                    </Toast.Header>\n                    <Toast.Body>{this.state.toast.text}</Toast.Body>\n                </Toast>\n            </Container>\n\n        )\n    }\n}\n\nexport default DashboardHospital"]},"metadata":{},"sourceType":"module"}