{"ast":null,"code":"import _objectSpread from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./PetCardClient.css';import CiteService from'../../../../service/cite.service';import QueryService from'../../../../service/query.service';import PetService from'../../../../service/pet.service';import UpdateFormPets from'../updatePets/UpdateFormPets';import QueryForm from'../../query/queryForm/QueryForm';import Container from'react-bootstrap/Container';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import Card from'react-bootstrap/Card';import Button from'react-bootstrap/Button';import ListGroup from'react-bootstrap/ListGroup';import Modal from'react-bootstrap/Modal';import Toast from'react-bootstrap/Toast';var PetCardClient=/*#__PURE__*/function(_Component){_inherits(PetCardClient,_Component);var _super=_createSuper(PetCardClient);function PetCardClient(props){var _this;_classCallCheck(this,PetCardClient);_this=_super.call(this,props);_this.handleModal=function(visible,modalName){_this.setState({modal:{show:visible,name:modalName}});};_this.handletoast=function(visible){var text=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var toastCopy=_objectSpread({},_this.state.toast);toastCopy.show=visible;toastCopy.text=text;_this.setState({toast:toastCopy});};_this.getQuerysInfo=function(){_this.queryService.queryFromPet(_this.props._id).then(function(response){return _this.setState({querys:response.data});}).catch(function(err){return console.log(err);});};_this.getCitesInfo=function(){_this.citeService.citesFromPet(_this.props._id).then(function(response){return _this.setState({cites:response.data});}).catch(function(err){return console.log(err);});};_this.getPetDetailsInfo=function(){_this.petService.getPetDetails(_this.props._id).then(function(response){return _this.setState({petInfo:response.data});}).catch(function(err){return console.log(err);});};_this.handleDelete=function(petId){_this.petService.deletePet(petId).then(function(){return _this.props.reloadPets();}).catch(function(err){return console.log(err);});};_this.finishQueryPost=function(){_this.getQuerysInfo();_this.handleModal(false);_this.handletoast(true,'Consulta enviada al Hospital');};_this.finishUpdatedPetPost=function(){_this.getPetDetailsInfo();_this.handleModal(false);_this.handletoast(true,'Has actualizado la mascota');};_this.componentDidMount=function(){_this.getQuerysInfo();_this.getCitesInfo();};_this.displayModal=function(modalName){if(_this.state.modal.show){switch(modalName){case\"createQuery\":return/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(QueryForm,{finishQueryCreate:_this.finishQueryPost,petId:_this.state.petInfo.id,hospitalArr:_this.props.vetHospital,closeModal:function closeModal(){return _this.handleModal(false);}}));case\"editPet\":return/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(UpdateFormPets,{propsPetCardClient:_this.props,statePetCardClient:_this.state,finishUpdatePet:_this.finishUpdatedPetPost,closeModal:function closeModal(){return _this.handleModal(false);}}));default:return null;}}};_this.state={petInfo:{id:_this.props._id,petPicPath:_this.props.petPicPath,name:_this.props.name,species:_this.props.species,breed:_this.props.breed,vetHospital:_this.props.vetHospital,owner:_this.props.owner},cites:\"\",querys:\"\",toast:{show:false,text:''},modal:{show:false,name:''}};_this.citeService=new CiteService();_this.queryService=new QueryService();_this.petService=new PetService();return _this;}_createClass(PetCardClient,[{key:\"render\",value:function render(){var _this2=this;console.log(this.props.vetHospital);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Container,{as:\"section\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{as:\"article\"},/*#__PURE__*/React.createElement(Card,{className:\"card\"},/*#__PURE__*/React.createElement(Card.Img,{variant:\"top\",src:this.state.petInfo.petPicPath}),/*#__PURE__*/React.createElement(Card.Header,{as:\"h5\"},this.state.petInfo.name),/*#__PURE__*/React.createElement(Button,{className:\"delete-button\",onClick:function onClick(){return _this2.handleDelete(_this2.state.petInfo.id);},variant:\"danger\",size:\"md\"},\"Eliminar mascota\"),/*#__PURE__*/React.createElement(ListGroup,{className:\"list-group-flush\"},/*#__PURE__*/React.createElement(ListGroup.Item,null,this.state.petInfo.species),/*#__PURE__*/React.createElement(ListGroup.Item,null,this.state.petInfo.breed),/*#__PURE__*/React.createElement(ListGroup.Item,null,\"Hospital de referencia: \",this.state.petInfo.vetHospital[0]&&this.state.petInfo.vetHospital[0].username)),/*#__PURE__*/React.createElement(\"h4\",{className:\"query\"},\"Consultas\"),this.state.querys&&this.state.querys.map(function(query){return/*#__PURE__*/React.createElement(Card.Body,{className:\"body\",key:query._id},/*#__PURE__*/React.createElement(Card.Title,null,query.subject),/*#__PURE__*/React.createElement(Card.Subtitle,null,query.date),/*#__PURE__*/React.createElement(Card.Text,{as:\"p\",className:\"card-text\"},query.description),query.citeHospital&&/*#__PURE__*/React.createElement(Card,{style:{display:query.citeHospital.description?'block':'none'}},/*#__PURE__*/React.createElement(Card.Title,{as:\"h5\",className:\"card-title-response\"},\"Respuesta\"),/*#__PURE__*/React.createElement(Card.Text,{as:\"p\",className:\"card-text-response\"},query.citeHospital.description)));}),/*#__PURE__*/React.createElement(\"h4\",{className:\"cite\"},\"Citas\"),this.state.cites&&this.state.cites.map(function(cite){return/*#__PURE__*/React.createElement(Card.Body,{className:\"body\",key:cite._id},/*#__PURE__*/React.createElement(Card.Title,null,cite.subject),/*#__PURE__*/React.createElement(Card.Subtitle,null,cite.date),/*#__PURE__*/React.createElement(Card.Text,{as:\"p\",className:\"card-text\"},cite.description));}),/*#__PURE__*/React.createElement(Card.Footer,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this2.handleModal(true,\"createQuery\");},variant:\"dark\"},\"Crear Consulta para \",this.state.petInfo.name),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this2.handleModal(true,\"editPet\");},variant:\"dark\"},\"Actualizar mascota \",this.state.petInfo.name)))))),/*#__PURE__*/React.createElement(Modal,{show:this.state.modal.show,onHide:function onHide(){return _this2.handleModal(false);}},this.displayModal(this.state.modal.name)),/*#__PURE__*/React.createElement(Toast,{className:\"toast-window\",onClose:function onClose(){return _this2.handletoast(false);},show:this.state.toast.show,delay:3000},/*#__PURE__*/React.createElement(Toast.Header,null,/*#__PURE__*/React.createElement(\"strong\",{className:\"mr-auto\"},\"Mensaje\")),/*#__PURE__*/React.createElement(Toast.Body,null,this.state.toast.text)));}}]);return PetCardClient;}(Component);export default PetCardClient;","map":{"version":3,"sources":["/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/src/components/pages/pets/petCardClient/PetCardClient.js"],"names":["React","Component","CiteService","QueryService","PetService","UpdateFormPets","QueryForm","Container","Row","Col","Card","Button","ListGroup","Modal","Toast","PetCardClient","props","handleModal","visible","modalName","setState","modal","show","name","handletoast","text","toastCopy","state","toast","getQuerysInfo","queryService","queryFromPet","_id","then","response","querys","data","catch","err","console","log","getCitesInfo","citeService","citesFromPet","cites","getPetDetailsInfo","petService","getPetDetails","petInfo","handleDelete","petId","deletePet","reloadPets","finishQueryPost","finishUpdatedPetPost","componentDidMount","displayModal","id","vetHospital","petPicPath","species","breed","owner","username","map","query","subject","date","description","citeHospital","display","cite"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport './PetCardClient.css'\n\nimport CiteService from '../../../../service/cite.service'\nimport QueryService from '../../../../service/query.service'\nimport PetService from '../../../../service/pet.service'\n\nimport UpdateFormPets from '../updatePets/UpdateFormPets'\nimport QueryForm from '../../query/queryForm/QueryForm'\n\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Card from 'react-bootstrap/Card'\nimport Button from 'react-bootstrap/Button'\nimport ListGroup from 'react-bootstrap/ListGroup'\nimport Modal from 'react-bootstrap/Modal'\nimport Toast from 'react-bootstrap/Toast'\n\n\nclass PetCardClient extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n\n            petInfo: {\n                id: this.props._id,\n                petPicPath: this.props.petPicPath,\n                name: this.props.name,\n                species: this.props.species,\n                breed: this.props.breed,\n                vetHospital: this.props.vetHospital,\n                owner: this.props.owner\n\n            },\n            cites: \"\",\n            querys: \"\",\n\n\n            toast: {\n                show: false,\n                text: ''\n            },\n            modal: {\n                show: false,\n                name: ''\n            }\n\n        }\n        this.citeService = new CiteService()\n        this.queryService = new QueryService()\n        this.petService = new PetService()\n\n    }\n\n\n    handleModal = (visible, modalName) => {\n        this.setState({ modal: { show: visible, name: modalName } })}\n\n    handletoast = (visible, text = '') => {\n        const toastCopy = { ...this.state.toast }\n        toastCopy.show = visible\n        toastCopy.text = text\n        this.setState({ toast: toastCopy })\n    }\n\n    getQuerysInfo = () => {\n        this.queryService.queryFromPet(this.props._id)\n            .then(response => {\n                return this.setState({ querys: response.data })\n            })\n            .catch(err => console.log(err))\n    }\n\n    getCitesInfo = () => {\n        this.citeService.citesFromPet(this.props._id)\n            .then(response => this.setState({ cites: response.data }))\n            .catch(err => console.log(err))\n    }\n\n    getPetDetailsInfo = () => {\n        this.petService.getPetDetails(this.props._id)\n            .then(response => this.setState({ petInfo: response.data }))\n            .catch(err => console.log(err))\n    }\n\n    handleDelete = (petId) => {\n        this.petService.deletePet(petId)\n            .then(() => this.props.reloadPets())\n            .catch(err => console.log(err))\n    }\n\n    finishQueryPost = () => {\n        this.getQuerysInfo()\n        this.handleModal(false)\n        this.handletoast(true, 'Consulta enviada al Hospital')\n    }\n\n    finishUpdatedPetPost = () => {\n        this.getPetDetailsInfo()\n        this.handleModal(false)\n        this.handletoast(true, 'Has actualizado la mascota')\n\n    }\n\n    componentDidMount = () => {\n        this.getQuerysInfo()\n        this.getCitesInfo()\n    }\n\n\n    displayModal = (modalName) => {\n        if (this.state.modal.show) {\n            switch (modalName) {\n                case \"createQuery\":\n                    return (\n                        <Modal.Body>\n                            <QueryForm\n                                finishQueryCreate={this.finishQueryPost}\n                                petId={this.state.petInfo.id}\n                                hospitalArr={this.props.vetHospital}\n                                closeModal={() => this.handleModal(false)} />\n                        </Modal.Body>\n                    )\n                case \"editPet\":\n                    return (\n                        <Modal.Body>\n                            <UpdateFormPets\n                                propsPetCardClient={this.props}\n                                statePetCardClient={this.state}\n                                finishUpdatePet={this.finishUpdatedPetPost}\n                                closeModal={() => this.handleModal(false)}\n\n                            />\n                        </Modal.Body>\n\n                    )\n                default:\n                    return null\n            }\n        }\n    }\n\n    render() {\n        console.log(this.props.vetHospital)\n\n\n        return (\n            <>\n                <Container as=\"section\">\n\n\n                    <Row>\n                        <Col as=\"article\">\n                            <Card className=\"card\">\n                                <Card.Img variant=\"top\" src={this.state.petInfo.petPicPath} />\n\n                                <Card.Header as=\"h5\">{this.state.petInfo.name}</Card.Header>\n                                <Button className=\"delete-button\" onClick={() => this.handleDelete(this.state.petInfo.id)} variant=\"danger\" size=\"md\">Eliminar mascota</Button>\n\n                                <ListGroup className=\"list-group-flush\">\n                                    <ListGroup.Item>{this.state.petInfo.species}</ListGroup.Item>\n                                    <ListGroup.Item>{this.state.petInfo.breed}</ListGroup.Item>\n                                    <ListGroup.Item>Hospital de referencia: {this.state.petInfo.vetHospital[0] && this.state.petInfo.vetHospital[0].username}</ListGroup.Item>\n                                </ListGroup>\n\n                                <h4 className=\"query\" >Consultas</h4>\n\n                                {this.state.querys && this.state.querys.map(query => {\n\n\n                                    return (\n\n                                        <Card.Body className=\"body\" key={query._id}>\n                                            <Card.Title>{query.subject}</Card.Title>\n                                            <Card.Subtitle>{query.date}</Card.Subtitle>\n                                            <Card.Text as=\"p\" className=\"card-text\">{query.description}</Card.Text>\n                                            {query.citeHospital && <Card style={{ display: query.citeHospital.description ? 'block' : 'none' }}>\n\n                                                <Card.Title as=\"h5\" className=\"card-title-response\">Respuesta</Card.Title>\n                                                <Card.Text as=\"p\" className=\"card-text-response\">{query.citeHospital.description}</Card.Text>\n\n                                            </Card>}\n                                        </Card.Body>\n                                    )\n                                })}\n\n                                <h4 className=\"cite\">Citas</h4>\n\n                                {this.state.cites && this.state.cites.map(cite => {\n\n\n                                    return (\n                                        <Card.Body className=\"body\" key={cite._id}>\n                                            <Card.Title>{cite.subject}</Card.Title>\n                                            <Card.Subtitle>{cite.date}</Card.Subtitle>\n                                            <Card.Text as=\"p\" className=\"card-text\">{cite.description}</Card.Text>\n                                        </Card.Body>\n                                    )\n                                })}\n\n\n                                <Card.Footer>\n                                    <Button onClick={() => this.handleModal(true, \"createQuery\")} variant=\"dark\" >Crear Consulta para {this.state.petInfo.name}</Button>\n                                    <Button onClick={() => this.handleModal(true, \"editPet\")} variant=\"dark\" >Actualizar mascota {this.state.petInfo.name}</Button>\n\n\n                                </Card.Footer>\n                            </Card>\n\n                        </Col>\n\n                    </Row>\n\n                </Container>\n\n                <Modal show={this.state.modal.show} onHide={() => this.handleModal(false)}>\n                    {this.displayModal(this.state.modal.name)}\n                </Modal>\n\n                <Toast className=\"toast-window\" onClose={() => this.handletoast(false)} show={this.state.toast.show} delay={3000} >\n                    <Toast.Header>\n                        <strong className=\"mr-auto\">Mensaje</strong>\n                    </Toast.Header>\n                    <Toast.Body>{this.state.toast.text}</Toast.Body>\n                </Toast>\n\n            </>\n        )\n    }\n}\n\nexport default PetCardClient\n\n\n\n"]},"metadata":{},"sourceType":"module"}