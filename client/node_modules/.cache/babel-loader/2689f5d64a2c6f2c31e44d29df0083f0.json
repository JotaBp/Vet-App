{"ast":null,"code":"var _jsxFileName = \"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/src/components/pages/pets/petCardClient/PetCardClient.js\";\nimport React, { Component } from 'react';\nimport './PetCardClient.css';\nimport CiteService from '../../../../service/cite.service';\nimport QueryService from '../../../../service/query.service';\nimport PetService from '../../../../service/pet.service';\nimport UpdateFormPets from '../updatePets/UpdateFormPets';\nimport QueryForm from '../../query/queryForm/QueryForm';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Modal from 'react-bootstrap/Modal';\nimport Toast from 'react-bootstrap/Toast';\n\nclass PetCardClient extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleModal = (visible, modalName) => {\n      console.log(`handlemodal depetcarclient ${visible}`);\n      this.setState({\n        modal: {\n          show: visible,\n          name: modalName\n        }\n      });\n    };\n\n    this.handletoast = (visible, text = '') => {\n      const toastCopy = { ...this.state.toast\n      };\n      toastCopy.show = visible;\n      toastCopy.text = text;\n      this.setState({\n        toast: toastCopy\n      });\n    };\n\n    this.getQuerysInfo = () => {\n      this.queryService.queryFromPet(this.props._id).then(response => {\n        return this.setState({\n          querys: response.data\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.getCitesInfo = () => {\n      this.citeService.citesFromPet(this.props._id).then(response => this.setState({\n        cites: response.data\n      })).catch(err => console.log(err));\n    };\n\n    this.getPetDetailsInfo = () => {\n      this.petService.getPetDetails(this.props._id).then(response => this.setState({\n        petInfo: response.data\n      })).catch(err => console.log(err));\n    };\n\n    this.handleDelete = petId => {\n      this.petService.deletePet(petId).then(() => this.props.reloadPets()).catch(err => console.log(err));\n    };\n\n    this.finishQueryPost = () => {\n      this.getQuerysInfo();\n      this.handleModal(false);\n      this.handletoast(true, 'Consulta enviada al Hospital');\n    };\n\n    this.finishUpdatedPetPost = () => {\n      console.log(\"entra\"); // this.props.reloadPets()\n\n      this.getPetDetailsInfo();\n      this.handleModal(false);\n      this.handletoast(true, 'Has actualizado la mascota');\n    };\n\n    this.componentDidMount = () => {\n      this.getQuerysInfo();\n      this.getCitesInfo();\n    };\n\n    this.displayModal = modalName => {\n      if (this.state.modal.show) {\n        switch (modalName) {\n          case \"createQuery\":\n            return /*#__PURE__*/React.createElement(Modal.Body, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 25\n              }\n            }, /*#__PURE__*/React.createElement(QueryForm, {\n              finishQueryCreate: this.finishQueryPost,\n              petId: this.state.petInfo.id,\n              hospitalArr: this.props.vetHospital,\n              closeModal: () => this.handleModal(false),\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 29\n              }\n            }));\n\n          case \"editPet\":\n            return /*#__PURE__*/React.createElement(Modal.Body, {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 25\n              }\n            }, /*#__PURE__*/React.createElement(UpdateFormPets, Object.assign({}, this.state, {\n              finishUpdatePet: this.finishUpdatedPetPost,\n              closeModal: () => this.handleModal(false) // index={this.props.index}\n              // updatePetInfo={this.props.updatePetInfo}\n              ,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 29\n              }\n            })));\n\n          default:\n            return null;\n        }\n      }\n    };\n\n    this.state = {\n      petInfo: {\n        id: this.props._id,\n        petPicPath: this.props.petPicPath,\n        name: this.props.name,\n        species: this.props.species,\n        breed: this.props.breed,\n        vetHospital: this.props.vetHospital,\n        owner: this.props.owner\n      },\n      cites: \"\",\n      querys: \"\",\n      toast: {\n        show: false,\n        text: ''\n      },\n      modal: {\n        show: false,\n        name: ''\n      } // modalShow: false,\n\n    };\n    this.citeService = new CiteService();\n    this.queryService = new QueryService();\n    this.petService = new PetService();\n  } // handleModal = visible => this.setState({ modalShow: visible })\n\n\n  render() {\n    console.log(this.props); // console.log(this.state.petInfo.vetHospital[0] && this.state.petInfo.vetHospital[0].username)\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Container, {\n      as: \"section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      as: \"article\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Card.Img, {\n      variant: \"top\",\n      src: this.state.petInfo.petPicPath,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(Card.Header, {\n      as: \"h5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 33\n      }\n    }, this.state.petInfo.name), /*#__PURE__*/React.createElement(Button, {\n      className: \"delete-button\",\n      onClick: () => this.handleDelete(this.state.petInfo.id),\n      variant: \"danger\",\n      size: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 33\n      }\n    }, \"Eliminar mascota\"), /*#__PURE__*/React.createElement(ListGroup, {\n      className: \"list-group-flush\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 37\n      }\n    }, this.state.petInfo.species), /*#__PURE__*/React.createElement(ListGroup.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 37\n      }\n    }, this.state.petInfo.breed), /*#__PURE__*/React.createElement(ListGroup.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 37\n      }\n    }, \"Hospital de referencia: \", this.state.petInfo.vetHospital[0] && this.state.petInfo.vetHospital[0].username)), /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"query\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 33\n      }\n    }, \"Consultas\"), this.state.querys && this.state.querys.map(query => {\n      return /*#__PURE__*/React.createElement(Card.Body, {\n        className: \"body\",\n        key: query._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Card.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 45\n        }\n      }, query.subject), /*#__PURE__*/React.createElement(Card.Subtitle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 45\n        }\n      }, query.date), /*#__PURE__*/React.createElement(Card.Text, {\n        as: \"p\",\n        className: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 45\n        }\n      }, query.description), query.citeHospital && /*#__PURE__*/React.createElement(Card, {\n        style: {\n          display: query.citeHospital.description ? 'block' : 'none'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 68\n        }\n      }, /*#__PURE__*/React.createElement(Card.Title, {\n        as: \"h5\",\n        className: \"card-title-response\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 49\n        }\n      }, \"Respuesta\"), /*#__PURE__*/React.createElement(Card.Text, {\n        as: \"p\",\n        className: \"card-text-response\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 49\n        }\n      }, query.citeHospital.description)));\n    }), /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"cite\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 33\n      }\n    }, \"Citas\"), this.state.cites && this.state.cites.map(cite => {\n      return /*#__PURE__*/React.createElement(Card.Body, {\n        className: \"body\",\n        key: cite._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(Card.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 45\n        }\n      }, cite.subject), /*#__PURE__*/React.createElement(Card.Subtitle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 45\n        }\n      }, cite.date), /*#__PURE__*/React.createElement(Card.Text, {\n        as: \"p\",\n        className: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 45\n        }\n      }, cite.description));\n    }), /*#__PURE__*/React.createElement(Card.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => this.handleModal(true, \"createQuery\"),\n      variant: \"dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 37\n      }\n    }, \"Crear Consulta para \", this.state.petInfo.name), /*#__PURE__*/React.createElement(Button, {\n      onClick: () => this.handleModal(true, \"editPet\"),\n      variant: \"dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 37\n      }\n    }, \"Actualizar mascota \", this.state.petInfo.name)))))), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.modal.show,\n      onHide: () => this.handleModal(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }\n    }, this.displayModal(this.state.modal.name)), /*#__PURE__*/React.createElement(Toast, {\n      className: \"toast-window\",\n      onClose: () => this.handletoast(false),\n      show: this.state.toast.show,\n      delay: 3000,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Toast.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      className: \"mr-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 25\n      }\n    }, \"Mensaje\")), /*#__PURE__*/React.createElement(Toast.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 21\n      }\n    }, this.state.toast.text)));\n  }\n\n}\n\nexport default PetCardClient;","map":{"version":3,"sources":["/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/src/components/pages/pets/petCardClient/PetCardClient.js"],"names":["React","Component","CiteService","QueryService","PetService","UpdateFormPets","QueryForm","Container","Row","Col","Card","Button","ListGroup","Modal","Toast","PetCardClient","constructor","props","handleModal","visible","modalName","console","log","setState","modal","show","name","handletoast","text","toastCopy","state","toast","getQuerysInfo","queryService","queryFromPet","_id","then","response","querys","data","catch","err","getCitesInfo","citeService","citesFromPet","cites","getPetDetailsInfo","petService","getPetDetails","petInfo","handleDelete","petId","deletePet","reloadPets","finishQueryPost","finishUpdatedPetPost","componentDidMount","displayModal","id","vetHospital","petPicPath","species","breed","owner","render","username","map","query","subject","date","description","citeHospital","display","cite"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport './PetCardClient.css'\n\nimport CiteService from '../../../../service/cite.service'\nimport QueryService from '../../../../service/query.service'\nimport PetService from '../../../../service/pet.service'\n\nimport UpdateFormPets from '../updatePets/UpdateFormPets'\nimport QueryForm from '../../query/queryForm/QueryForm'\n\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Card from 'react-bootstrap/Card'\nimport Button from 'react-bootstrap/Button'\nimport ListGroup from 'react-bootstrap/ListGroup'\nimport Modal from 'react-bootstrap/Modal'\nimport Toast from 'react-bootstrap/Toast'\n\n\nclass PetCardClient extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n\n            petInfo: {\n                id: this.props._id,\n                petPicPath: this.props.petPicPath,\n                name: this.props.name,\n                species: this.props.species,\n                breed: this.props.breed,\n                vetHospital: this.props.vetHospital,\n                owner: this.props.owner\n\n            },\n            cites: \"\",\n            querys: \"\",\n\n\n            toast: {\n                show: false,\n                text: ''\n            },\n            modal: {\n                show: false,\n                name: ''\n            }\n            // modalShow: false,\n\n        }\n        this.citeService = new CiteService()\n        this.queryService = new QueryService()\n        this.petService = new PetService()\n\n    }\n\n    // handleModal = visible => this.setState({ modalShow: visible })\n\n    handleModal = (visible, modalName) => {\n        console.log(`handlemodal depetcarclient ${visible}`)\n        this.setState({ modal: { show: visible, name: modalName } })}\n\n    handletoast = (visible, text = '') => {\n        const toastCopy = { ...this.state.toast }\n        toastCopy.show = visible\n        toastCopy.text = text\n        this.setState({ toast: toastCopy })\n    }\n\n    getQuerysInfo = () => {\n        this.queryService.queryFromPet(this.props._id)\n            .then(response => {\n                return this.setState({ querys: response.data })\n            })\n            .catch(err => console.log(err))\n    }\n\n    getCitesInfo = () => {\n        this.citeService.citesFromPet(this.props._id)\n            .then(response => this.setState({ cites: response.data }))\n            .catch(err => console.log(err))\n    }\n\n    getPetDetailsInfo = () => {\n        this.petService.getPetDetails(this.props._id)\n            .then(response => this.setState({ petInfo: response.data }))\n            .catch(err => console.log(err))\n    }\n\n    handleDelete = (petId) => {\n        this.petService.deletePet(petId)\n            .then(() => this.props.reloadPets())\n            .catch(err => console.log(err))\n    }\n\n    finishQueryPost = () => {\n        this.getQuerysInfo()\n        this.handleModal(false)\n        this.handletoast(true, 'Consulta enviada al Hospital')\n    }\n\n    finishUpdatedPetPost = () => {\n        console.log(\"entra\")\n        // this.props.reloadPets()\n        this.getPetDetailsInfo()\n        this.handleModal(false)\n        this.handletoast(true, 'Has actualizado la mascota')\n\n    }\n\n    componentDidMount = () => {\n        this.getQuerysInfo()\n        this.getCitesInfo()\n    }\n\n    //Falla el delete y el create, se crean y se eliminan los registros, pero no se actuliza la pagina en el momento en el que se produce la accion\n\n    displayModal = (modalName) => {\n        if (this.state.modal.show) {\n            switch (modalName) {\n                case \"createQuery\":\n                    return (\n                        <Modal.Body>\n                            <QueryForm\n                                finishQueryCreate={this.finishQueryPost}\n                                petId={this.state.petInfo.id}\n                                hospitalArr={this.props.vetHospital}\n                                closeModal={() => this.handleModal(false)} />\n                        </Modal.Body>\n                    )\n                case \"editPet\":\n                    return (\n                        <Modal.Body>\n                            <UpdateFormPets\n                                {...this.state}\n                                finishUpdatePet={this.finishUpdatedPetPost}\n                                closeModal={() => this.handleModal(false)}\n                                // index={this.props.index}\n                                // updatePetInfo={this.props.updatePetInfo}\n                            />\n                        </Modal.Body>\n\n                    )\n                default:\n                    return null\n            }\n        }\n    }\n\n    render() {\n\n        console.log(this.props)\n\n\n        // console.log(this.state.petInfo.vetHospital[0] && this.state.petInfo.vetHospital[0].username)\n\n        return (\n            <>\n                <Container as=\"section\">\n\n\n                    <Row>\n                        <Col as=\"article\">\n                            <Card className=\"card\">\n                                <Card.Img variant=\"top\" src={this.state.petInfo.petPicPath} />\n\n                                <Card.Header as=\"h5\">{this.state.petInfo.name}</Card.Header>\n                                <Button className=\"delete-button\" onClick={() => this.handleDelete(this.state.petInfo.id)} variant=\"danger\" size=\"md\">Eliminar mascota</Button>\n\n                                <ListGroup className=\"list-group-flush\">\n                                    <ListGroup.Item>{this.state.petInfo.species}</ListGroup.Item>\n                                    <ListGroup.Item>{this.state.petInfo.breed}</ListGroup.Item>\n                                    <ListGroup.Item>Hospital de referencia: {this.state.petInfo.vetHospital[0] && this.state.petInfo.vetHospital[0].username}</ListGroup.Item>\n                                </ListGroup>\n\n                                <h4 className=\"query\" >Consultas</h4>\n\n                                {this.state.querys && this.state.querys.map(query => {\n\n\n                                    return (\n\n                                        <Card.Body className=\"body\" key={query._id}>\n                                            <Card.Title>{query.subject}</Card.Title>\n                                            <Card.Subtitle>{query.date}</Card.Subtitle>\n                                            <Card.Text as=\"p\" className=\"card-text\">{query.description}</Card.Text>\n                                            {query.citeHospital && <Card style={{ display: query.citeHospital.description ? 'block' : 'none' }}>\n\n                                                <Card.Title as=\"h5\" className=\"card-title-response\">Respuesta</Card.Title>\n                                                <Card.Text as=\"p\" className=\"card-text-response\">{query.citeHospital.description}</Card.Text>\n\n                                            </Card>}\n                                        </Card.Body>\n                                    )\n                                })}\n\n                                <h4 className=\"cite\">Citas</h4>\n\n                                {this.state.cites && this.state.cites.map(cite => {\n\n\n                                    return (\n                                        <Card.Body className=\"body\" key={cite._id}>\n                                            <Card.Title>{cite.subject}</Card.Title>\n                                            <Card.Subtitle>{cite.date}</Card.Subtitle>\n                                            <Card.Text as=\"p\" className=\"card-text\">{cite.description}</Card.Text>\n                                        </Card.Body>\n                                    )\n                                })}\n\n\n                                <Card.Footer>\n                                    <Button onClick={() => this.handleModal(true, \"createQuery\")} variant=\"dark\" >Crear Consulta para {this.state.petInfo.name}</Button>\n                                    <Button onClick={() => this.handleModal(true, \"editPet\")} variant=\"dark\" >Actualizar mascota {this.state.petInfo.name}</Button>\n\n\n                                </Card.Footer>\n                            </Card>\n\n                        </Col>\n\n                    </Row>\n\n                </Container>\n\n                {/* <Modal className=\"modal-window\" show={this.state.modalShow} onHide={() => this.handleModal(false)}>\n                    <Modal.Body>\n                        <QueryForm finishQueryCreate={this.finishQueryPost} petId={this.state.petInfo.id} hospitalArr={this.props.vetHospital} closeModal={() => this.handleModal(false)} />\n                    </Modal.Body>\n                </Modal> */}\n\n                <Modal show={this.state.modal.show} onHide={() => this.handleModal(false)}>\n                    {this.displayModal(this.state.modal.name)}\n                </Modal>\n\n                <Toast className=\"toast-window\" onClose={() => this.handletoast(false)} show={this.state.toast.show} delay={3000} >\n                    <Toast.Header>\n                        <strong className=\"mr-auto\">Mensaje</strong>\n                    </Toast.Header>\n                    <Toast.Body>{this.state.toast.text}</Toast.Body>\n                </Toast>\n\n            </>\n        )\n    }\n}\n\nexport default PetCardClient\n\n\n\n"]},"metadata":{},"sourceType":"module"}