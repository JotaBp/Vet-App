{"ast":null,"code":"var _jsxFileName = \"/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/src/components/pages/dashboard/dashboardClient/DashboardClient.js\";\nimport React, { Component } from 'react';\nimport CiteService from '../../../../service/cite.service';\nimport QueryService from '../../../../service/query.service';\nimport CiteCard from '../../cites/citesCard/CiteCard';\nimport QueryCard from '../../query/queryCard/QueryCard';\nimport CiteForm from '../../cites/citesForm/CiteForm';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Figure from 'react-bootstrap/Figure';\nimport FigureImage from 'react-bootstrap/FigureImage';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Toast from 'react-bootstrap/Toast';\nimport Modal from 'react-bootstrap/Modal';\nimport { Link } from 'react-router-dom';\n\nclass DashboardClient extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleModal = visible => this.setState({\n      modalShow: visible\n    });\n\n    this.handletoast = (visible, text = '') => {\n      const toastCopy = { ...this.state.toast\n      };\n      toastCopy.show = visible;\n      toastCopy.text = text;\n      this.setState({\n        toast: toastCopy\n      });\n    };\n\n    this.getCitesInfo = () => {\n      con;\n      this.props.loggedInUser.pets.forEach(pet => this.citeService.citesFromPet(pet._id)).then(response => this.setState({\n        cites: response.data\n      })).catch(err => console.log(err));\n    };\n\n    this.getQueryInfo = () => {\n      this.queryService.queryFromHospital(this.props.loggedInUser._id).then(response => this.setState({\n        querys: response.data\n      })).catch(err => console.log(err));\n    };\n\n    this.componentDidMount = () => {\n      this.getCitesInfo();\n      this.getQueryInfo();\n    };\n\n    this.finishQueryPost = () => {\n      this.getQueryInfo();\n      this.handleModal(false);\n      this.handletoast(true, 'Consulta creada en BBDD');\n    };\n\n    this.state = {\n      userInfo: {\n        querys: \"\",\n        cites: \"\"\n      },\n      toast: {\n        show: false,\n        text: ''\n      },\n      modalShow: false\n    };\n    this.citeService = new CiteService();\n    this.queryService = new QueryService();\n  }\n\n  render() {\n    console.log(this.props.loggedInUser.pets); // console.log(this.state.cites)\n    // console.log(this.state.querys)\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Container, {\n      as: \"section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => this.handleModal(true),\n      variant: \"dark\",\n      style: {\n        marginBottom: '20px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 26\n      }\n    }, \"Crear nueva consulta\")), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 29\n      }\n    })))), /*#__PURE__*/React.createElement(Container, {\n      as: \"section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }\n    }, \"Citas\"), this.state.cites && this.state.cites.map(cite => /*#__PURE__*/React.createElement(CiteCard, Object.assign({\n      key: cite._id\n    }, cite, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 72\n      }\n    })))), /*#__PURE__*/React.createElement(Container, {\n      as: \"section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }, \"Consultas\"), this.state.querys && this.state.querys.map(query => /*#__PURE__*/React.createElement(QueryCard, Object.assign({\n      key: query._id\n    }, query, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 74\n      }\n    })))), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.modalShow,\n      onHide: () => this.handleModal(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(CiteForm, {\n      finishCitePost: this.finishCiteCreate,\n      closeModal: () => this.handleModal(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(Toast, {\n      onClose: () => this.handletoast(false),\n      show: this.state.toast.show,\n      delay: 3000,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Toast.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"holder.js/20x20?text=%20\",\n      className: \"rounded mr-2\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"strong\", {\n      className: \"mr-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 25\n      }\n    }, \"Mensaje\")), /*#__PURE__*/React.createElement(Toast.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    }, this.state.toast.text)));\n  }\n\n}\n\nexport default DashboardClient;","map":{"version":3,"sources":["/home/jotabp94/Documentos/Ironhack/Curso/Semana 8/Vet-App/client/src/components/pages/dashboard/dashboardClient/DashboardClient.js"],"names":["React","Component","CiteService","QueryService","CiteCard","QueryCard","CiteForm","Container","Row","Col","Figure","FigureImage","Form","Button","Toast","Modal","Link","DashboardClient","constructor","props","handleModal","visible","setState","modalShow","handletoast","text","toastCopy","state","toast","show","getCitesInfo","con","loggedInUser","pets","forEach","pet","citeService","citesFromPet","_id","then","response","cites","data","catch","err","console","log","getQueryInfo","queryService","queryFromHospital","querys","componentDidMount","finishQueryPost","userInfo","render","marginBottom","map","cite","query","finishCiteCreate"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport CiteService from '../../../../service/cite.service'\nimport QueryService from '../../../../service/query.service'\n\n\nimport CiteCard from '../../cites/citesCard/CiteCard'\nimport QueryCard from '../../query/queryCard/QueryCard'\nimport CiteForm from '../../cites/citesForm/CiteForm'\n\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Figure from 'react-bootstrap/Figure'\nimport FigureImage from 'react-bootstrap/FigureImage'\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\nimport Toast from 'react-bootstrap/Toast'\nimport Modal from 'react-bootstrap/Modal'\n\nimport { Link } from 'react-router-dom'\n\n\nclass DashboardClient extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = { \n            userInfo: {\n                querys: \"\",\n                cites: \"\"\n            },\n            toast: {\n                show: false,\n                text: ''\n            },\n            modalShow: false\n\n        }\n        this.citeService = new CiteService()\n        this.queryService = new QueryService()\n    }\n    \n    handleModal = visible => this.setState({ modalShow: visible })\n    handletoast = (visible, text = '') => {\n        const toastCopy = { ...this.state.toast }\n        toastCopy.show = visible\n        toastCopy.text = text\n        this.setState({ toast: toastCopy })\n    }\n    \n    getCitesInfo = () => {\n        con\n        this.props.loggedInUser.pets.forEach(pet => this.citeService.citesFromPet(pet._id))\n        .then(response => this.setState({ cites: response.data }))\n        .catch(err => console.log(err))\n    }\n\n    getQueryInfo = () => {\n        this.queryService.queryFromHospital(this.props.loggedInUser._id)\n        .then(response => this.setState({ querys: response.data }))\n        .catch(err => console.log(err))\n    }\n    \n    \n    componentDidMount = () => {\n        this.getCitesInfo()\n        this.getQueryInfo()\n    }\n    \n    finishQueryPost = () => {\n        this.getQueryInfo()\n        this.handleModal(false)\n        this.handletoast(true, 'Consulta creada en BBDD')\n    }\n\n\n    render() {\n\n        console.log(this.props.loggedInUser.pets)\n        // console.log(this.state.cites)\n        // console.log(this.state.querys)\n\n        return (\n            <>\n                <Container as=\"section\" >\n                    <Row>\n                        <Col>\n                            {/* utilizar con estos botones un renderizado condicional\n                         segun el role del usuario */}\n                         <Button onClick={() => this.handleModal(true)} variant=\"dark\" style={{ marginBottom: '20px' }}>Crear nueva consulta</Button>\n\n                        </Col>\n                        <Col>\n                            <Button></Button>\n\n                        </Col>\n                        <Col>\n                            <Button></Button>\n                        </Col>\n\n                    </Row>\n                </Container>\n\n                <Container as=\"section\" >\n\n                <h1>Citas</h1>\n\n\n                    {this.state.cites && this.state.cites.map(cite =>  <CiteCard key={cite._id} {...cite} />)}\n\n\n                </Container>\n\n                <Container as=\"section\" >\n\n                <h1>Consultas</h1>\n\n\n                    {this.state.querys && this.state.querys.map(query => <QueryCard key={query._id} {...query} />)}\n\n\n                </Container>\n\n                <Modal show={this.state.modalShow} onHide={() => this.handleModal(false)}>\n                    <Modal.Body>\n                        <CiteForm finishCitePost={this.finishCiteCreate} closeModal={() => this.handleModal(false)} />\n                    </Modal.Body>\n                </Modal>\n\n                <Toast onClose={() => this.handletoast(false)} show={this.state.toast.show} delay={3000} >\n                    <Toast.Header>\n                        <img src=\"holder.js/20x20?text=%20\" className=\"rounded mr-2\" alt=\"\" />\n                        <strong className=\"mr-auto\">Mensaje</strong>\n                    </Toast.Header>\n                    <Toast.Body>{this.state.toast.text}</Toast.Body>\n                </Toast>\n            </>\n\n        )\n    }\n}\n\nexport default DashboardClient"]},"metadata":{},"sourceType":"module"}